{% extends "base.html" %}

{% block title %}{{ 'Editar' if empresa else 'Cadastrar' }} Empresa{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h3>{{ 'Editar Empresa' if empresa else 'Cadastrar Nova Empresa' }}</h3>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('admin.editar_empresa', empresa_id=empresa.id) if empresa else url_for('admin.cadastrar_empresa') }}">
                        
                        <div class="row">
                            <!-- SÓ MOSTRA O CÓDIGO SE ESTIVER EDITANDO -->
                            {% if empresa %}
                            <div class="col-md-4 mb-3">
                                <label for="codigo" class="form-label">Código da Empresa</label>
                                <input type="text" class="form-control" id="codigo" value="{{ empresa.id }}" readonly style="background-color: #e9ecef;">
                            </div>
                            {% endif %}

                            <!-- O campo Nome agora ocupa o espaço restante -->
                            <div class="col-md-{{ '8' if empresa else '12' }} mb-3">
                                <label for="nome" class="form-label">Nome da Empresa*</label>
                                <input type="text" class="form-control" id="nome" name="nome" value="{{ empresa.nome if empresa else '' }}" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="cnpj" class="form-label">CNPJ</label>
                                <input type="text" class="form-control" id="cnpj" name="cnpj" value="{{ empresa.cnpj if empresa else '' }}">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="status" class="form-label">Status*</label>
                                <select class="form-select" id="status" name="status" required>
                                    <option value="Ativo" {% if empresa and empresa.status == 'Ativo' %}selected{% endif %}>Ativo</option>
                                    <option value="Inativo" {% if empresa and empresa.status == 'Inativo' %}selected{% endif %}>Inativo</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="telefone" class="form-label">Telefone</label>
                                <input type="tel" class="form-control" id="telefone" name="telefone" value="{{ empresa.telefone if empresa else '' }}">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">E-mail</label>
                                <input type="email" class="form-control" id="email" name="email" value="{{ empresa.email if empresa else '' }}">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="contato" class="form-label">Contato</label>
                            <input type="text" class="form-control" id="contato" name="contato" value="{{ empresa.contato if empresa else '' }}">
                        </div>

                        <div class="mb-3">
                            <label for="endereco" class="form-label">Endereço</label>
                            <input type="text" class="form-control" id="endereco" name="endereco" value="{{ empresa.endereco if empresa else '' }}">
                        </div>

                        <div class="mb-3">
                            <label for="observacoes" class="form-label">Observações Gerais</label>
                            <textarea class="form-control" id="observacoes" name="observacoes" rows="3">{{ empresa.observacoes if empresa else '' }}</textarea>
                        </div>

                        <hr>
                        <div class="d-flex justify-content-end">
                            <a href="{{ url_for('admin.admin_dashboard', aba='empresas') }}" class="btn btn-secondary me-2">Cancelar</a>
                            <button type="submit" class="btn btn-primary">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
